name: PR Workflow
on: pull_request
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install packages
        run: |
          sudo apt-get -y install perl libtest-perl-critic-perl liblist-moreutils-perl libyaml-perl ipc-run3 libmojolicious-perl libmojolicious-plugin-i18n-perl libxml-libxml-perl
      - name: Test critic
        run: prove -l t/critic.t
      - name: Auth
        run: prove -l t/40_auth_sql.t t/60_user_sql.t t/65_user_ldap.t t/66_group_ldap.t t/front/60_ldap.t t/front/70_ldap_access.t t/front/80_access.t t/mojo/30_grants.t t/user/20_grants.t t/user/25_grant_rename.t t/user/30_grant_remove.t t/user/40_grant_shutdown.t
